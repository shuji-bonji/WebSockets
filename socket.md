# Socket（ソケット）とは？

## 基本定義

Socket は、通信するプログラム同士がデータの送受信を行うためのインターフェースです。特に、TCP/IPプロトコルスタックにおいて、アプリケーションがネットワーク通信を行うための**API（アプリケーション・プログラミング・インターフェース）**として使われます。

📌 例：C言語やPython、JavaScriptなどで「ソケットを開く」「データを送る」といった処理を書くときに、使われるのがこの「ソケットAPI」です。

## OSI参照モデルとの関係

|層|説明|例・技術|
|---|---|---|
|7. アプリケーション層|Webアプリ、メール、FTP|HTTP, SMTP|
|6. プレゼンテーション層|データの表現・変換|JPEG, SSL/TLS暗号化|
|5. セッション層|接続管理|WebSocket（ここ！）|
|4. トランスポート層|信頼性のある通信|TCP, UDP|
|3. ネットワーク層|ルーティング|IPアドレス|
|2. データリンク層|MACアドレス, LAN通信|Ethernet|
|1. 物理層|電気信号など|ケーブル, 無線|

💡 Socketは主に「トランスポート層」での通信に関係します。
- ソケットは、TCPやUDP（トランスポート層）を使った通信のエンドポイントを定義します。
- つまり、「IPアドレス + ポート番号」という組み合わせで、通信相手を識別する手段です。

## ソケット通信の仕組み

### クライアントとサーバのやりとり（TCPの場合）

```
クライアント：socket() → connect() → send()/recv()
サーバー　　：socket() → bind() → listen() → accept() → recv()/send()
```

#### 例
- クライアントが localhost:8080 に接続要求を送る
- サーバーが受け入れて、通信を開始
- 双方が send() や recv() でメッセージ交換

## WebSocketとの違い

### WebSocketとは？
- WebSocket は、**セッション層（第5層）**に属するプロトコルで、
- HTTPハンドシェイクを使って、Socket（TCP）通信に昇格する手段です。

### 主な違い

|比較軸|Socket|WebSocket|
|---|---|---|
|層|主にトランスポート層 (TCP/UDP)|セッション層（HTTP越しのTCP）|
|通信方式|汎用的（バイナリ、TCP/UDP）|主にWeb向け、双方向、全二重通信|
|初期接続|自前で構築|HTTPで握手（Upgradeヘッダ使用）|
|通常使用|ネイティブアプリ、IoTなど|ブラウザとサーバ間のリアルタイム通信|
|プロトコル|TCP/UDP|独自プロトコル（ws://, wss://）|

### 補足
- WebSocketは**「ソケットを使っているプロトコル」**という意味では「Socket通信の一種」です。
- ただし、それはHTTPを利用した上でセッションを管理しているため、OSI的には一層上に位置します。

## まとめ

用語	意味	OSI層	例
Socket	TCP/UDPを通して通信するためのAPI	トランスポート層	socket() 関数など
WebSocket	Web用の双方向通信プロトコル	セッション層	ws://example.com